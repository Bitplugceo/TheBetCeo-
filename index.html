<!DOCTYPE html>
<html lang="en">
<head>

<link rel="apple-touch-icon" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<link rel="icon" type="image/jpeg" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1b1b1b">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Prediction Engine</title>

<style>
body { background:#1b1b1b; color:#d4af37; font-family:Segoe UI,sans-serif; margin:0; }
.wrapper { max-width:760px; margin:auto; padding:12px 14px 40px; }
h1 { text-align:center; font-size:18px; margin-bottom:12px; }
.section { border:1px solid #d4af37; background:#202020; padding:8px 10px; margin-bottom:10px; }
.section h2 { font-size:14px; margin-bottom:6px; }
label { display:block; font-size:12px; margin:5px 0 2px; }

input, select {
  width:240px;
  max-width:95%;
  padding:5px 6px;
  font-size:12px;
  background:#262626;
  color:#d4af37;
  border:1px solid #d4af37;
  margin:4px 0 8px 0;
  border-radius:0;
  appearance:none;
}

input[type="checkbox"] { width:auto; margin-right:6px; }

.buttons { text-align:center; margin-top:10px; }
.btn { padding:6px 18px; margin:6px; font-size:12px; font-weight:bold; background:#d4af37; color:#111; border:none; cursor:pointer; }

#results { width:100%; border-collapse:collapse; font-size:12px; margin-top:10px; }
#results th,#results td { border:1px solid #d4af37; padding:6px; text-align:center; }

.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }

</style>
</head>

<body>
<div class="wrapper">
<h1>üèÄ Basketball Prediction Engine</h1>

<!-- League -->
<div class="section">
<h2>League</h2>
<select id="league">
<optgroup label="Europe">
<option>EuroLeague</option>
<option>EuroCup</option>
<option>ABA League</option>
<option>ABA League 2</option>
<option>Spain ACB</option>
<option>Italy Serie A1</option>
<option>France Pro A</option>
<option>Germany BBL</option>
<option>Turkey BSL</option>
<option>Greece A1</option>
<option>Lithuania LKL</option>
</optgroup>
<optgroup label="USA">
<option>NBA</option>
<option>WNBA</option>
<option>NBA G League</option>
<option>NCAA Division I</option>
<option>NCAA Division II</option>
<option>NCAA Division III</option>
</optgroup>
<optgroup label="Asia">
<option>China CBA</option>
<option>Korea KBL</option>
<option>Japan B League</option>
<option>Philippines PBA</option>
</optgroup>
<optgroup label="Africa">
<option>Basketball Africa League</option>
<option>Nigeria Premier League</option>
<option>Egypt Super League</option>
</optgroup>
</select>
</div>

<!-- Context -->
<div class="section">
<h2>Game Context</h2>
<label>Home Team</label>
<select id="homeTeam">
<option value="A">Team A</option>
<option value="B">Team B</option>
</select>
</div>

<!-- Market -->
<div class="section">
<h2>Market Lines</h2>
<label>FT Total Market (150.5 - 160.5)</label>
<input id="ftMarket">
<label>1H Total Market (75.5 - 85.5)</label>
<input id="h1Market">
<label>Team A Total Market</label>
<input id="teamAMarket">
<label>Team B Total Market</label>
<input id="teamBMarket">
</div>

<!-- Averages -->
<div class="section">
<h2>Team Averages</h2>
<label>Team A Avg Points</label>
<input id="teamAAvg">
<label>Team B Avg Points</label>
<input id="teamBAvg">
</div>

<!-- Defense -->
<div class="section">
<h2>Defensive Metrics</h2>
<label>Team A Points Allowed</label>
<input id="papgA">
<label>Team B Points Allowed</label>
<input id="papgB">
</div>

<!-- Pace -->
<div class="section">
<h2>Pace</h2>
<label>Team A Pace</label>
<input id="paceA">
<label>Team B Pace</label>
<input id="paceB">
</div>

<!-- H2H -->
<div class="section">
<h2>Head to Head (Optional)</h2>
<label><input type="checkbox" id="useH2HFT"> Use H2H (FT)</label>
<input id="h2hA" placeholder="Team A H2H FT Avg">
<input id="h2hB" placeholder="Team B H2H FT Avg">

<label><input type="checkbox" id="useH2H1H"> Use H2H (1H)</label>
<input id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">Run</button>
<button class="btn" onclick="clearAll()">Clear</button>
</div>

<table id="results">
<tr>
<th>Pick</th>
<th>Projection</th>
<th>Edge</th>
<th>Prediction</th>
<th>Probability %</th>
</tr>
</table>

</div>

<script>

function getNum(id){
  let v=parseFloat(document.getElementById(id).value);
  return isNaN(v)?NaN:v;
}

function getMid(id){
  let str=document.getElementById(id).value;
  if(!str||!str.includes("-")) return NaN;
  let [a,b]=str.split("-").map(x=>parseFloat(x));
  return (isNaN(a)||isNaN(b))?NaN:(a+b)/2;
}

function buildRow(name,proj,market){

  if(isNaN(proj)||isNaN(market)){
    return {name,proj:"NaN",edge:"NaN",pred:"NO PLAY",prob:"0.0"};
  }

  let edge=proj-market;
  let std=proj*0.08;

  if(std===0||isNaN(std)){
    return {name,proj:proj.toFixed(2),edge:"NaN",pred:"NO PLAY",prob:"0.0"};
  }

  let z=edge/std;
  let prob=0.5*(1+Math.tanh(z*0.8));
  let minEdge=market*0.03;

  let pred="NO PLAY";

  if(Math.abs(edge)>=minEdge){
    if(edge>0) pred="OVER "+market.toFixed(1);
    else pred="UNDER "+market.toFixed(1);
  }

  return {
    name,
    proj:proj.toFixed(2),
    edge:edge.toFixed(2),
    pred,
    prob:(prob*100).toFixed(1)
  };
}

function runEngine(){

  const table=document.getElementById("results");

  table.innerHTML=`<tr>
  <th>Pick</th><th>Projection</th>
  <th>Edge</th><th>Prediction</th><th>Probability %</th>
  </tr>`;

  let ftMarket=getMid("ftMarket");
  let h1Market=getMid("h1Market");
  let aMarket=getMid("teamAMarket");
  let bMarket=getMid("teamBMarket");

  let aAvg=getNum("teamAAvg");
  let bAvg=getNum("teamBAvg");
  let papgA=getNum("papgA");
  let papgB=getNum("papgB");
  let paceA=getNum("paceA");
  let paceB=getNum("paceB");

  let aProj=(!isNaN(aAvg)&&!isNaN(papgB))?(aAvg+papgB)/2:NaN;
  let bProj=(!isNaN(bAvg)&&!isNaN(papgA))?(bAvg+papgA)/2:NaN;

  if(!isNaN(aProj)&&!isNaN(bProj)){
    if(document.getElementById("homeTeam").value==="A") aProj+=2;
    else bProj+=2;
  }

  let ftProj=NaN;

  if(!isNaN(aProj)&&!isNaN(bProj)){
    let avgPace=(!isNaN(paceA)&&!isNaN(paceB))?(paceA+paceB)/2:100;
    ftProj=(aProj+bProj)*(avgPace/100);
  }

  if(document.getElementById("useH2HFT").checked && !isNaN(ftProj)){
    let hA=getNum("h2hA");
    let hB=getNum("h2hB");
    if(!isNaN(hA)&&!isNaN(hB)){
      ftProj=(ftProj+(hA+hB))/2;
    }
  }

  let h1Proj=!isNaN(ftProj)?ftProj*0.5:NaN;

  if(document.getElementById("useH2H1H").checked && !isNaN(h1Proj)){
    let h1=getNum("h2h1H");
    if(!isNaN(h1)){
      h1Proj=(h1Proj+h1)/2;
    }
  }

  let picks=[
    buildRow("FT Total",ftProj,ftMarket),
    buildRow("1H Total",h1Proj,h1Market),
    buildRow("Team A Total",aProj,aMarket),
    buildRow("Team B Total",bProj,bMarket)
  ];

  picks.forEach(p=>{
    let row=table.insertRow();
    row.innerHTML=`
    <td>${p.name}</td>
    <td>${p.proj}</td>
    <td>${p.edge}</td>
    <td class="${
      p.pred.includes("OVER")?"pred-over":
      p.pred.includes("UNDER")?"pred-under":
      "pred-noplay"
    }">${p.pred}</td>
    <td>${p.prob}</td>`;
  });

}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>{
    if(i.type==="checkbox") i.checked=false;
    else i.value="";
  });
}

</script>
</body>
</html>
