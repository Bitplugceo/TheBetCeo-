<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#d4af37">
<meta name="apple-mobile-web-app-title" content="BB Model">

<link rel="apple-touch-icon" href="icon.jpeg">
<link rel="icon" type="image/jpeg" href="icon.jpeg">

<title>Simple Basketball Model</title>

<style>
body {
  background: #111;
  color: #d4af37;
  font-family: Segoe UI, sans-serif;
  margin: 0;
}

.wrapper {
  max-width: 760px;
  margin: 20px auto;
  padding: 0 10px;
}

h1 {
  text-align: center;
  margin-bottom: 15px;
  font-size: 20px;
}

.section {
  border: 1px solid #d4af37;
  background: #1a1a1a;
  padding: 10px 12px;
  margin: 12px auto;
  width: 92%;
  box-sizing: border-box;
}

label {
  display: block;
  font-size: 12px;
  margin-bottom: 3px;
}

input {
  width: 100%;
  max-width: 240px;
  padding: 6px;
  font-size: 12px;
  background: #222;
  color: #d4af37;
  border: 1px solid #d4af37;
  margin-bottom: 6px;
}

.buttons {
  text-align: center;
  margin-top: 12px;
}

.btn {
  padding: 6px 16px;
  margin: 6px;
  font-size: 12px;
  font-weight: bold;
  background: #d4af37;
  color: #111;
  border: none;
  cursor: pointer;
}

#results {
  width: 92%;
  margin: 15px auto;
  border-collapse: collapse;
  font-size: 12px;
  display: none;
}

#results th, #results td {
  border: 1px solid #d4af37;
  padding: 6px;
  text-align: center;
}

.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }

.lock {
  font-size: 11px;
  margin-left: 4px;
}
</style>
</head>

<body>

<div class="wrapper">

<h1>üèÄ Simple Basketball Model</h1>

<div class="section">
  <label>Full Game Total</label>
  <input id="ftLine">

  <label>Team A Total</label>
  <input id="teamALine">

  <label>Team B Total</label>
  <input id="teamBLine">
</div>

<div class="section">
  <label>Team A Avg Scored (Last 5 - Regulation)</label>
  <input id="teamAScored">

  <label>Team A Avg Allowed (Last 5 - Regulation)</label>
  <input id="teamAAllowed">
</div>

<div class="section">
  <label>Team B Avg Scored (Last 5 - Regulation)</label>
  <input id="teamBScored">

  <label>Team B Avg Allowed (Last 5 - Regulation)</label>
  <input id="teamBAllowed">
</div>

<div class="buttons">
  <button class="btn" onclick="runModel()">Run</button>
  <button class="btn" onclick="clearAll()">Clear</button>
</div>

<table id="results">
  <tr>
    <th>Pick</th>
    <th>Projection</th>
    <th>Edge</th>
    <th>Prediction</th>
  </tr>
</table>

</div>

<script>

function num(id){
  return parseFloat(document.getElementById(id).value);
}

function decision(edge, type){

  if(type === "team" && Math.abs(edge) >= 4)
    return edge > 0 ? "OVER" : "UNDER";

  if(type === "total" && Math.abs(edge) >= 6)
    return edge > 0 ? "OVER" : "UNDER";

  return "NO PLAY";
}

function runModel(){

  const table = document.getElementById("results");
  table.style.display = "table";

  table.innerHTML = `
    <tr>
      <th>Pick</th>
      <th>Projection</th>
      <th>Edge</th>
      <th>Prediction</th>
    </tr>`;

  let ftLine = num("ftLine");
  let aLine  = num("teamALine");
  let bLine  = num("teamBLine");

  let aScored  = num("teamAScored");
  let aAllowed = num("teamAAllowed");

  let bScored  = num("teamBScored");
  let bAllowed = num("teamBAllowed");

  let aProj = (aScored + bAllowed) / 2;
  let bProj = (bScored + aAllowed) / 2;
  let ftProj = aProj + bProj;

  let picks = [
    {name:"Full Game Total", proj:ftProj, line:ftLine, type:"total"},
    {name:"Team A Total", proj:aProj, line:aLine, type:"team"},
    {name:"Team B Total", proj:bProj, line:bLine, type:"team"}
  ];

  let lock = -1;
  let maxEdge = 0;

  picks.forEach((p,i)=>{
    p.edge = p.proj - p.line;
    p.pick = decision(p.edge, p.type);

    if(p.pick !== "NO PLAY" && Math.abs(p.edge) > maxEdge){
      maxEdge = Math.abs(p.edge);
      lock = i;
    }
  });

  picks.forEach((p,i)=>{
    let row = table.insertRow();
    let text = p.pick;

    if(i === lock && p.pick !== "NO PLAY")
      text += ` <span class="lock">üîí</span>`;

    row.innerHTML = `
      <td>${p.name}</td>
      <td>${isNaN(p.proj) ? "" : p.proj.toFixed(2)}</td>
      <td>${isNaN(p.edge) ? "" : p.edge.toFixed(2)}</td>
      <td class="${
        p.pick.startsWith("OVER") ? "pred-over" :
        p.pick.startsWith("UNDER") ? "pred-under" :
        "pred-noplay"
      }">${text}</td>
    `;
  });
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=> i.value = "");
  document.getElementById("results").style.display = "none";
}

</script>

</body>
</html>
