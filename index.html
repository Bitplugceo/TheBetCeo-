<!DOCTYPE html>
<html lang="en">
<head>

<link rel="apple-touch-icon" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<link rel="icon" type="image/jpeg" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1b1b1b">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Basketball Prediction Engine</title>

<style>
body{
  background:#1b1b1b;
  color:#d4af37;
  font-family:Segoe UI,sans-serif;
  margin:0;
}

.wrapper{
  max-width:750px;
  margin:auto;
  padding:14px;
}

h1{
  text-align:center;
  font-size:18px;
  margin-bottom:12px;
}

.section{
  border:1px solid #d4af37;
  background:#202020;
  padding:10px;
  margin-bottom:12px;
}

.section h2{
  font-size:14px;
  margin-bottom:6px;
}

label{
  display:block;
  font-size:12px;
  margin:6px 0 2px;
}

input[type="text"], select{
  width:240px;
  max-width:95%;
  padding:6px;
  font-size:12px;
  background:#262626;
  color:#d4af37;
  border:1px solid #d4af37;
  border-radius:0;
  margin-bottom:8px;
}

/* Real native checkbox size */
input[type="checkbox"]{
  width:16px;
  height:16px;
  accent-color:#d4af37;
  margin-right:6px;
  vertical-align:middle;
}

.buttons{
  text-align:center;
  margin-top:12px;
}

.btn{
  padding:7px 20px;
  margin:6px;
  font-size:12px;
  font-weight:bold;
  background:#d4af37;
  color:#111;
  border:none;
  cursor:pointer;
}

#results{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
  margin-top:12px;
  display:none;   /* hidden by default */
}

#results th,#results td{
  border:1px solid #d4af37;
  padding:6px;
  text-align:center;
}

.pred-over{ background:#1e7d3a; color:white; font-weight:bold; }
.pred-under{ background:#8b1e1e; color:white; font-weight:bold; }
.pred-noplay{ background:#444; color:#bbb; font-weight:bold; }

</style>
</head>

<body>
<div class="wrapper">

<h1>üèÄ Basketball Prediction Engine</h1>

<!-- League -->
<div class="section">
<h2>League</h2>
<select>
<optgroup label="Europe">
<option>EuroLeague</option>
<option>EuroCup</option>
<option>ABA League</option>
<option>ABA League 2</option>
<option>Spain ACB</option>
<option>Italy Serie A1</option>
<option>France Pro A</option>
<option>Germany BBL</option>
<option>Turkey BSL</option>
<option>Greece A1</option>
<option>Lithuania LKL</option>
</optgroup>
<optgroup label="USA">
<option>NBA</option>
<option>WNBA</option>
<option>NBA G League</option>
<option>NCAA Division I</option>
</optgroup>
</select>
</div>

<!-- Market -->
<div class="section">
<h2>Market Lines</h2>
<label>FT Total (150.5 - 160.5)</label>
<input type="text" id="ftMarket">
<label>1H Total (75.5 - 85.5)</label>
<input type="text" id="h1Market">
<label>Team A Total</label>
<input type="text" id="teamAMarket">
<label>Team B Total</label>
<input type="text" id="teamBMarket">
</div>

<!-- Averages -->
<div class="section">
<h2>Team Averages</h2>
<label>Team A Avg Points</label>
<input type="text" id="teamAAvg">
<label>Team B Avg Points</label>
<input type="text" id="teamBAvg">
</div>

<!-- Defense -->
<div class="section">
<h2>Defensive Metrics</h2>
<label>Team A Points Allowed</label>
<input type="text" id="papgA">
<label>Team B Points Allowed</label>
<input type="text" id="papgB">
</div>

<!-- Pace -->
<div class="section">
<h2>Pace</h2>
<label>Team A Pace</label>
<input type="text" id="paceA">
<label>Team B Pace</label>
<input type="text" id="paceB">
</div>

<!-- H2H -->
<div class="section">
<h2>Head to Head (Optional)</h2>

<label>
<input type="checkbox" id="useH2HFT">
Use H2H (FT)
</label>

<input type="text" id="h2hA" placeholder="Team A H2H FT Avg">
<input type="text" id="h2hB" placeholder="Team B H2H FT Avg">

<label>
<input type="checkbox" id="useH2H1H">
Use H2H (1H)
</label>

<input type="text" id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">Run</button>
<button class="btn" onclick="clearAll()">Clear</button>
</div>

<table id="results"></table>

</div>

<script>

function num(id){
  let v=parseFloat(document.getElementById(id).value);
  return isNaN(v)?NaN:v;
}

function mid(id){
  let str=document.getElementById(id).value;
  if(!str||!str.includes("-")) return NaN;
  let parts=str.split("-");
  let a=parseFloat(parts[0]);
  let b=parseFloat(parts[1]);
  return (isNaN(a)||isNaN(b))?NaN:(a+b)/2;
}

function buildRow(name,proj,market){

  if(isNaN(proj)||isNaN(market)){
    return {name,proj:"NaN",edge:"NaN",pred:"NO PLAY",prob:"0.0"};
  }

  let edge=proj-market;
  let std=proj*0.08;

  if(std<=0||isNaN(std)){
    return {name,proj:proj.toFixed(2),edge:"NaN",pred:"NO PLAY",prob:"0.0"};
  }

  let z=edge/std;
  let prob=0.5*(1+Math.tanh(z*0.8));
  let minEdge=market*0.03;

  let prediction="NO PLAY";

  if(Math.abs(edge)>=minEdge){
    prediction=edge>0
      ? "OVER "+market.toFixed(1)
      : "UNDER "+market.toFixed(1);
  }

  return {
    name,
    proj:proj.toFixed(2),
    edge:edge.toFixed(2),
    pred:prediction,
    prob:(prob*100).toFixed(1)
  };
}

function runEngine(){

  const table=document.getElementById("results");
  table.style.display="table";   /* show only after run */

  table.innerHTML=`
  <tr>
  <th>Pick</th>
  <th>Projection</th>
  <th>Edge</th>
  <th>Prediction</th>
  <th>Probability %</th>
  </tr>`;

  let ftM=mid("ftMarket");
  let h1M=mid("h1Market");
  let aM=mid("teamAMarket");
  let bM=mid("teamBMarket");

  let aAvg=num("teamAAvg");
  let bAvg=num("teamBAvg");
  let papgA=num("papgA");
  let papgB=num("papgB");
  let paceA=num("paceA");
  let paceB=num("paceB");

  let aProj=(!isNaN(aAvg)&&!isNaN(papgB))?(aAvg+papgB)/2:NaN;
  let bProj=(!isNaN(bAvg)&&!isNaN(papgA))?(bAvg+papgA)/2:NaN;

  let ftProj=NaN;

  if(!isNaN(aProj)&&!isNaN(bProj)){
    let avgPace=(!isNaN(paceA)&&!isNaN(paceB))?(paceA+paceB)/2:100;
    ftProj=(aProj+bProj)*(avgPace/100);
  }

  if(document.getElementById("useH2HFT").checked&&!isNaN(ftProj)){
    let hA=num("h2hA");
    let hB=num("h2hB");
    if(!isNaN(hA)&&!isNaN(hB)){
      ftProj=(ftProj+(hA+hB))/2;
    }
  }

  let h1Proj=!isNaN(ftProj)?ftProj*0.5:NaN;

  if(document.getElementById("useH2H1H").checked&&!isNaN(h1Proj)){
    let h1=num("h2h1H");
    if(!isNaN(h1)){
      h1Proj=(h1Proj+h1)/2;
    }
  }

  let picks=[
    buildRow("FT Total",ftProj,ftM),
    buildRow("1H Total",h1Proj,h1M),
    buildRow("Team A Total",aProj,aM),
    buildRow("Team B Total",bProj,bM)
  ];

  picks.forEach(p=>{
    let row=table.insertRow();
    row.innerHTML=`
    <td>${p.name}</td>
    <td>${p.proj}</td>
    <td>${p.edge}</td>
    <td class="${
      p.pred.includes("OVER")?"pred-over":
      p.pred.includes("UNDER")?"pred-under":
      "pred-noplay"
    }">${p.pred}</td>
    <td>${p.prob}</td>`;
  });
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>{
    if(i.type==="checkbox") i.checked=false;
    else i.value="";
  });

  document.getElementById("results").style.display="none";  /* hide immediately */
}

</script>

</body>
</html>
