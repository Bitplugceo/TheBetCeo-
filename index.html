<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Basketball Prediction Engine</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#111;
  color:#f5c542;
  padding:15px;
}
h1 { text-align:center; }

.section {
  border:1px solid #f5c542;
  padding:12px;
  margin-bottom:15px;
  border-radius:6px;
}

input {
  width:100%;
  padding:6px;
  margin:4px 0 10px 0;
  background:#222;
  border:1px solid #f5c542;
  color:#fff;
}

button {
  width:48%;
  padding:10px;
  margin-top:10px;
  background:#f5c542;
  border:none;
  font-weight:bold;
}

#results {
  margin-top:20px;
  width:100%;
  border-collapse:collapse;
  display:none;
}

#results th, #results td {
  border:1px solid #f5c542;
  padding:6px;
  text-align:center;
}

.pred-over { background:#1e7d3a; }
.pred-under { background:#8b1e1e; }
.pred-noplay { background:#444; }

.lock { font-size:12px; }
</style>
</head>

<body>

<h1>üèÄ Basketball Prediction Engine</h1>

<div class="section">
<h2>Market Lines</h2>
FT Total Market<input id="ftMarket" placeholder="210 - 215">
1H Total Market<input id="h1Market" placeholder="105 - 108">
Team A Total Market<input id="teamAMarket" placeholder="104 - 108">
Team B Total Market<input id="teamBMarket" placeholder="102 - 107">
</div>

<div class="section">
<h2>Team Scoring Averages</h2>
Team A FT Average<input id="teamAAvg">
Team B FT Average<input id="teamBAvg">
</div>

<div class="section">
<h2>Head to Head (Optional)</h2>
<label><input type="checkbox" id="useH2HFT"> Use H2H (FT)</label>
Team A H2H FT Avg<input id="h2hA">
Team B H2H FT Avg<input id="h2hB">

<label><input type="checkbox" id="useH2H1H"> Use H2H (1H)</label>
1H H2H Avg Total<input id="h2h1H">
</div>

<div class="section">
<h2>Team Defense</h2>
Team A Points Allowed<input id="papgA">
Team B Points Allowed<input id="papgB">
</div>

<button onclick="runEngine()">RUN</button>
<button onclick="clearAll()">CLEAR</button>

<table id="results"></table>

<script>
function num(id){ let v=parseFloat(document.getElementById(id).value); return isNaN(v)?NaN:v; }
function mid(r){ if(!r||!r.includes("-")) return NaN; let [a,b]=r.split("-").map(x=>parseFloat(x)); return (a+b)/2; }
function clamp(v,min,max){ return Math.max(min,Math.min(max,v)); }
function conf(edge){ if(isNaN(edge)) return 0; return Math.min(95, Math.round(70+(Math.abs(edge)-3)*5)); }

function runEngine(){
let table=document.getElementById("results");
table.style.display="table";
table.innerHTML=`<tr><th>Pick</th><th>Engine</th><th>Edge</th><th>Prediction</th><th>Conf%</th></tr>`;

let ftM=mid(ftMarket.value), h1M=mid(h1Market.value), aM=mid(teamAMarket.value), bM=mid(teamBMarket.value);
let [ftL,ftH]=ftMarket.value.split("-").map(Number);
let [h1L,h1H]=h1Market.value.split("-").map(Number);
let [aL,aH]=teamAMarket.value.split("-").map(Number);
let [bL,bH]=teamBMarket.value.split("-").map(Number);

let aAvg=num("teamAAvg"), bAvg=num("teamBAvg");
let h2hA=num("h2hA"), h2hB=num("h2hB"), h2h1H=num("h2h1H");
let papgA=num("papgA"), papgB=num("papgB");

let aOff=useH2HFT.checked?(0.7*aAvg+0.3*h2hA):aAvg;
let bOff=useH2HFT.checked?(0.7*bAvg+0.3*h2hB):bAvg;

let aEng=(aOff+papgB)/2;
let bEng=(bOff+papgA)/2;
let ftEng=(aEng+bEng);
let h1Eng=useH2H1H.checked?(0.7*(ftEng*0.48)+0.3*h2h1H):(ftEng*0.48);

function pick(name,eng,mkt,low,high){
 let edge=eng-mkt;
 let c=conf(edge);
 let pred="NO PLAY";
 if(!isNaN(edge)){
   if(edge>0) pred="OVER "+clamp(mkt-3,low,high).toFixed(1);
   if(edge<0) pred="UNDER "+clamp(mkt+3,low,high).toFixed(1);
 }
 if(c<70) pred="NO PLAY";
 return {name,eng:eng.toFixed(2),edge:edge.toFixed(2),pred,conf:c,raw:edge};
}

let picks=[
 pick("FT Total",ftEng,ftM,ftL,ftH),
 pick("1H Total",h1Eng,h1M,h1L,h1H),
 pick("Team A",aEng,aM,aL,aH),
 pick("Team B",bEng,bM,bL,bH)
];

let lock=-1,max=0;
picks.forEach((p,i)=>{ if(Math.abs(p.raw)>max && p.conf>=70){max=Math.abs(p.raw);lock=i;} });

picks.forEach((p,i)=>{
 let r=table.insertRow();
 let pr=p.pred;
 if(i===lock && pr!=="NO PLAY") pr+=" üîí";
 r.innerHTML=`<td>${p.name}</td><td>${p.eng}</td><td>${p.edge}</td>
 <td class="${pr.startsWith('OVER')?'pred-over':pr.startsWith('UNDER')?'pred-under':'pred-noplay'}">${pr}</td>
 <td>${p.conf}%</td>`;
});
}

function clearAll(){
document.querySelectorAll("input").forEach(i=>i.type==="checkbox"?i.checked=false:i.value="");
results.style.display="none";
}
</script>

</body>
</html>
