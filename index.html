<!DOCTYPE html>
<html lang="en">
<head>
<link rel="apple-touch-icon" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<link rel="icon" type="image/jpeg" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Basketball Prediction Engine</title>
<style>
body { background:#1b1b1b; color:#d4af37; font-family:Segoe UI,sans-serif; margin:0; }
.wrapper { max-width:720px; margin:auto; padding:12px 14px 40px; }
h1 { text-align:center; font-size:18px; margin-bottom:12px; }
.section { border:1px solid #d4af37; background:#202020; padding:8px 10px; margin-bottom:10px; }
.section h2 { font-size:14px; margin-bottom:6px; }
label { display:block; font-size:12px; margin:5px 0 2px; }
input, select { width:240px; max-width:90%; padding:5px 6px; font-size:12px; background:#262626; color:#d4af37; border:1px solid #d4af37; margin:4px 0 8px 0; display:block; border-radius:0; }
input[type="checkbox"] { width:auto; margin-right:6px; }
.metrics { display:block; }
.buttons { text-align:center; margin-top:10px; }
.btn { padding:6px 18px; margin:6px; font-size:12px; font-weight:bold; background:#d4af37; color:#111; border:none; cursor:pointer; }
.table-wrap { overflow-x:auto; margin-top:12px; }
#results { width:100%; border-collapse:collapse; font-size:12px; display:none; }
#results th,#results td { border:1px solid #d4af37; padding:6px; text-align:center; }
.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }
.lock{ font-size:4px; margin-left:2px; display:inline-flex; align-items:center; transform:translateY(-2px); }
</style>
</head>
<body>
<div class="wrapper">
<h1>üèÄ Basketball Prediction Engine</h1>

<!-- League -->
<div class="section">
<h2>League</h2>
<select id="leagueSelect">
  <!-- USA -->
  <option value="USA ‚Äì NBA">USA ‚Äì NBA</option>
  <option value="USA ‚Äì G-League">USA ‚Äì G-League</option>
  <option value="USA ‚Äì NCAA Men">USA ‚Äì NCAA Men</option>
  <option value="USA ‚Äì NCAA Women">USA ‚Äì NCAA Women</option>
  <!-- Spain -->
  <option value="Spain ‚Äì ACB">Spain ‚Äì ACB</option>
  <option value="Spain ‚Äì LEB Oro">Spain ‚Äì LEB Oro</option>
  <option value="Spain ‚Äì LEB Plata">Spain ‚Äì LEB Plata</option>
  <!-- Turkey -->
  <option value="Turkey ‚Äì BSL">Turkey ‚Äì BSL</option>
  <!-- France -->
  <option value="France ‚Äì LNB">France ‚Äì LNB</option>
  <!-- Germany -->
  <option value="Germany ‚Äì BBL">Germany ‚Äì BBL</option>
  <!-- Italy -->
  <option value="Italy ‚Äì Serie A">Italy ‚Äì Serie A</option>
  <!-- Japan -->
  <option value="Japan ‚Äì B.League 1">Japan ‚Äì B.League 1</option>
  <option value="Japan ‚Äì B.League 2">Japan ‚Äì B.League 2</option>
  <!-- China -->
  <option value="China ‚Äì CBA">China ‚Äì CBA</option>
  <!-- Korea -->
  <option value="Korea ‚Äì KBL">Korea ‚Äì KBL</option>
  <!-- Australia -->
  <option value="Australia ‚Äì NBL">Australia ‚Äì NBL</option>
  <!-- Argentina -->
  <option value="Argentina ‚Äì Liga Nacional">Argentina ‚Äì Liga Nacional</option>
  <!-- Brazil -->
  <option value="Brazil ‚Äì NBB">Brazil ‚Äì NBB</option>
  <!-- Mexico -->
  <option value="Mexico ‚Äì LNBP">Mexico ‚Äì LNBP</option>
  <!-- Europe -->
  <option value="Europe ‚Äì EuroLeague">Europe ‚Äì EuroLeague</option>
  <option value="Europe ‚Äì EuroCup">Europe ‚Äì EuroCup</option>
  <option value="ABA ‚Äì Liga ABA">ABA ‚Äì Liga ABA</option>
  <!-- Africa -->
  <option value="Africa ‚Äì BAL">Africa ‚Äì BAL</option>
  <!-- Middle East / Asia Minor -->
  <option value="Middle East ‚Äì Various">Middle East ‚Äì Various</option>
  <!-- Additional minor leagues can be added here -->
</select>
</div>

<!-- Market Lines -->
<div class="section">
<h2>Market Lines</h2>
<label>FT Total Market</label><input id="ftMarket">
<label>1H Total Market</label><input id="h1Market">
<label>Team A Total Market</label><input id="teamAMarket">
<label>Team B Total Market</label><input id="teamBMarket">
</div>

<!-- Team Scoring Averages -->
<div class="section">
<h2>Team Scoring Averages</h2>
<label>Team A FT Average</label><input id="teamAAvg">
<label>Team B FT Average</label><input id="teamBAvg">
</div>

<!-- H2H -->
<div class="section">
<h2>Head to Head (Optional)</h2>
<label><input type="checkbox" id="useH2HFT"> Team A & B FT</label>
<input id="h2hA" placeholder="Team A H2H FT Avg">
<input id="h2hB" placeholder="Team B H2H FT Avg">
<label><input type="checkbox" id="useH2H1H"> 1H H2H</label>
<input id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<!-- Team Metrics -->
<div class="section metrics">
<h2>Team Metrics</h2>
<label>Team A PAG</label><input id="pagA">
<label>Team A PAPG</label><input id="papgA">
<label>Team A Pace</label><input id="paceA">
<label>Team B PAG</label><input id="pagB">
<label>Team B PAPG</label><input id="papgB">
<label>Team B Pace</label><input id="paceB">
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">Run</button>
<button class="btn" onclick="clearAll()">Clear</button>
</div>

<div class="table-wrap">
<table id="results">
<tr><th>Pick</th><th>Engine Mid</th><th>Edge</th><th>Prediction</th><th>Confidence %</th></tr>
</table>
</div>

<script>
function num(id){let v=parseFloat(document.getElementById(id).value);return isNaN(v)?NaN:v;}
function mid(r){if(!r||!r.includes("-"))return NaN;let[a,b]=r.split("-").map(x=>parseFloat(x));return(isNaN(a)||isNaN(b))?NaN:(a+b)/2;}
function clamp(v,min,max){return Math.max(min,Math.min(max,v));}
function confidence(e){if(isNaN(e))return 0;return Math.min(95,Math.round(70+(Math.abs(e)-3)*5));}
function roundToHalf(n){return Math.ceil(n*2)/2;}

const leaguePaceMap = {
"USA ‚Äì NBA":100.8,"USA ‚Äì G-League":99,"USA ‚Äì NCAA Men":71,"USA ‚Äì NCAA Women":69,
"Spain ‚Äì ACB":76,"Spain ‚Äì LEB Oro":74,"Spain ‚Äì LEB Plata":72,
"Turkey ‚Äì BSL":76,"France ‚Äì LNB":75.5,"Germany ‚Äì BBL":75,"Italy ‚Äì Serie A":75.5,
"Japan ‚Äì B.League 1":78,"Japan ‚Äì B.League 2":75,"China ‚Äì CBA":81,"Korea ‚Äì KBL":79,
"Australia ‚Äì NBL":83,"Argentina ‚Äì Liga Nacional":77.5,"Brazil ‚Äì NBB":78,
"Mexico ‚Äì LNBP":79,"Europe ‚Äì EuroLeague":76,"Europe ‚Äì EuroCup":75,
"ABA ‚Äì Liga ABA":77,"Africa ‚Äì BAL":75,"Middle East ‚Äì Various":76
};

function runEngine(){
  const table=document.getElementById("results");
  table.style.display="table";
  table.innerHTML=`<tr><th>Pick</th><th>Engine Mid</th><th>Edge</th><th>Prediction</th><th>Confidence %</th></tr>`;

  let ft=mid(ftMarket.value), h1=mid(h1Market.value), aM=mid(teamAMarket.value), bM=mid(teamBMarket.value);
  let [ftL,ftH]=ftMarket.value.split("-").map(x=>parseFloat(x)||NaN);
  let [h1L,h1H]=h1Market.value.split("-").map(x=>parseFloat(x)||NaN);
  let [aL,aH]=teamAMarket.value.split("-").map(x=>parseFloat(x)||NaN);
  let [bL,bH]=teamBMarket.value.split("-").map(x=>parseFloat(x)||NaN);

  let aAvg=num("teamAAvg"),bAvg=num("teamBAvg");
  let h2hA=num("h2hA"),h2hB=num("h2hB"),h2h1H=num("h2h1H");
  let pagA=num("pagA"),pagB=num("pagB"), papgA=num("papgA"),papgB=num("papgB"), paceA=num("paceA"), paceB=num("paceB");
  let useH2HFT=document.getElementById("useH2HFT").checked, useH2H1H=document.getElementById("useH2H1H").checked;

  let aScore = useH2HFT ? 0.7*aAvg + 0.3*h2hA : aAvg;
  let bScore = useH2HFT ? 0.7*bAvg + 0.3*h2hB : bAvg;

  let ftEng = (aScore+bScore)*0.6 + (papgA+papgB)*0.4;
  let aEng = aScore*0.55 + papgB*0.45;
  let bEng = bScore*0.55 + papgA*0.45;
  let h1Eng = ftEng*0.47;
  if(useH2H1H) h1Eng = 0.65*h1Eng + 0.35*h2h1H;

  let selectedLeague = document.getElementById("leagueSelect").value;
  let baselinePace = leaguePaceMap[selectedLeague] || 100;
  if(!isNaN(paceA) && !isNaN(paceB)){
    let paceMultiplier = ((paceA+paceB)/2)/baselinePace;
    paceMultiplier = clamp(paceMultiplier,0.9,1.1);
    aEng*=paceMultiplier; bEng*=paceMultiplier; ftEng*=paceMultiplier; h1Eng*=paceMultiplier;
  }

  if(!isNaN(pagA) && !isNaN(pagB)){
    ftEng=clamp(ftEng,pagA+pagB-5,pagA+pagB+5);
    aEng=clamp(aEng,pagA-3,pagA+3);
    bEng=clamp(bEng,pagB-3,pagB+3);
    h1Eng=clamp(h1Eng,(pagA+pagB)/2-3,(pagA+pagB)/2+3);
  }

  function make(name,eng,mkt,low,high){
    let edge=eng-mkt, conf=confidence(edge), pred="NO PLAY";
    if(Math.abs(edge)<4||conf<70) return {name,eng:roundToHalf(eng),edge:edge.toFixed(2),pred:"NO PLAY",conf,raw:edge};
    if(edge>0) pred="OVER "+roundToHalf(clamp(mkt-3,low,high));
    else pred="UNDER "+roundToHalf(clamp(mkt+3,low,high));
    return {name,eng:roundToHalf(eng),edge:edge.toFixed(2),pred,conf,raw:edge};
  }

  let picks=[
    make("FT Total",ftEng,ft,ftL,ftH),
    make("1H Total",h1Eng,h1,h1L,h1H),
    make("Team A Total",aEng,aM,aL,aH),
    make("Team B Total",bEng,bM,bL,bH)
  ];

  let lock=-1,max=0;
  picks.forEach((p,i)=>{if(Math.abs(p.raw)>max && p.pred!=="NO PLAY"){max=Math.abs(p.raw);lock=i;}});
  picks.forEach((p,i)=>{
    let row=table.insertRow();
    let pr=p.pred;
    if(i===lock) pr+=` <span class="lock">üîí</span>`;
    row.innerHTML=`<td>${p.name}</td><td>${p.eng}</td><td>${p.edge}</td>
    <td class="${p.pred.startsWith("OVER")?"pred-over":p.pred.startsWith("UNDER")?"pred-under":"pred-noplay"}">${pr}</td>
    <td>${p.conf}%</td>`;
  });
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>{if(i.type==="checkbox")i.checked=false;else i.value="";});
  document.getElementById("results").style.display="none";
}
</script>
</body>
</html>
