<!DOCTYPE html>
<html lang="en">
<head>

<link rel="apple-touch-icon" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<link rel="icon" type="image/jpeg" href="0A45F320-A89F-4851-AA4E-CE22138FD52F.jpeg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1b1b1b">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Prediction Engine</title>

<style>
body { background:#1b1b1b; color:#d4af37; font-family:Segoe UI,sans-serif; margin:0; }
.wrapper { max-width:760px; margin:auto; padding:12px 14px 40px; }
h1 { text-align:center; font-size:18px; margin-bottom:12px; }
.section { border:1px solid #d4af37; background:#202020; padding:8px 10px; margin-bottom:10px; }
.section h2 { font-size:14px; margin-bottom:6px; }
label { display:block; font-size:12px; margin:5px 0 2px; }

input, select {
  width:240px;
  max-width:95%;
  padding:5px 6px;
  font-size:12px;
  background:#262626;
  color:#d4af37;
  border:1px solid #d4af37;
  margin:4px 0 8px 0;
  border-radius:0;
  appearance:none;
}

input[type="checkbox"] { width:auto; margin-right:6px; }

.buttons { text-align:center; margin-top:10px; }
.btn { padding:6px 18px; margin:6px; font-size:12px; font-weight:bold; background:#d4af37; color:#111; border:none; cursor:pointer; }

#results { width:100%; border-collapse:collapse; font-size:12px; margin-top:10px; }
#results th,#results td { border:1px solid #d4af37; padding:6px; text-align:center; }

.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }

</style>
</head>

<body>
<div class="wrapper">
<h1>üèÄ Basketball Prediction Engine</h1>

<!-- LEAGUE -->
<div class="section">
<h2>League</h2>
<select id="league">

<optgroup label="USA">
<option>NBA</option>
<option>WNBA</option>
<option>NBA G League</option>
<option>NCAA Division I Men</option>
<option>NCAA Division I Women</option>
<option>NCAA Division II</option>
<option>NCAA Division III</option>
<option>NAIA</option>
<option>NJCAA</option>
</optgroup>

<optgroup label="Europe">
<option>EuroLeague</option>
<option>EuroCup</option>
<option>ABA League</option>
<option>Spain ACB</option>
<option>Spain LEB Gold</option>
<option>Spain LEB Silver</option>
<option>Italy Serie A1</option>
<option>Italy Serie A2</option>
<option>France Pro A</option>
<option>France Pro B</option>
<option>Germany BBL</option>
<option>Germany Pro A</option>
<option>Turkey BSL</option>
<option>Greece A1</option>
<option>Lithuania LKL</option>
<option>Poland PLK</option>
<option>Serbia KLS</option>
<option>Adriatic ABA 2</option>
</optgroup>

<optgroup label="Asia">
<option>China CBA</option>
<option>Korea KBL</option>
<option>Japan B League</option>
<option>Japan B2 League</option>
<option>Philippines PBA</option>
<option>ASEAN Basketball League</option>
</optgroup>

<optgroup label="Africa">
<option>Basketball Africa League</option>
<option>Nigeria Premier League</option>
<option>South Africa League</option>
<option>Egypt Super League</option>
</optgroup>

<optgroup label="International">
<option>FIBA World Cup</option>
<option>Olympics</option>
<option>EuroBasket</option>
<option>AfroBasket</option>
<option>FIBA AmeriCup</option>
<option>FIBA Asia Cup</option>
</optgroup>

</select>
</div>

<!-- GAME CONTEXT -->
<div class="section">
<h2>Game Context</h2>
<label>Home Team</label>
<select id="homeTeam">
<option value="A">Team A</option>
<option value="B">Team B</option>
</select>
</div>

<!-- MARKET -->
<div class="section">
<h2>Market Lines</h2>
<label>FT Total Market (150.5 - 160.5)</label>
<input id="ftMarket">
<label>1H Total Market (75.5 - 85.5)</label>
<input id="h1Market">
<label>Team A Total Market</label>
<input id="teamAMarket">
<label>Team B Total Market</label>
<input id="teamBMarket">
</div>

<!-- TEAM AVERAGES -->
<div class="section">
<h2>Team Averages</h2>
<label>Team A Avg Points</label>
<input id="teamAAvg">
<label>Team B Avg Points</label>
<input id="teamBAvg">
</div>

<!-- DEFENSE -->
<div class="section">
<h2>Defensive Metrics</h2>
<label>Team A Points Allowed</label>
<input id="papgA">
<label>Team B Points Allowed</label>
<input id="papgB">
</div>

<!-- PACE -->
<div class="section">
<h2>Pace</h2>
<label>Team A Pace</label>
<input id="paceA">
<label>Team B Pace</label>
<input id="paceB">
</div>

<!-- H2H -->
<div class="section">
<h2>Head to Head (Optional)</h2>
<label><input type="checkbox" id="useH2HFT"> Use H2H (FT)</label>
<input id="h2hA" placeholder="Team A H2H FT Avg">
<input id="h2hB" placeholder="Team B H2H FT Avg">

<label><input type="checkbox" id="useH2H1H"> Use H2H (1H)</label>
<input id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">Run</button>
<button class="btn" onclick="clearAll()">Clear</button>
</div>

<table id="results">
<tr>
<th>Pick</th>
<th>Projection</th>
<th>Edge</th>
<th>Prediction</th>
<th>Probability %</th>
</tr>
</table>

</div>

<script>

<script>

function parseNum(id){
  let v = parseFloat(document.getElementById(id).value);
  return isNaN(v) ? NaN : v;
}

function mid(str){
  if(!str || !str.includes("-")) return NaN;
  let [a,b] = str.split("-").map(x => parseFloat(x));
  return (isNaN(a)||isNaN(b)) ? NaN : (a+b)/2;
}

function makePick(name, proj, market){

  if(isNaN(proj) || isNaN(market)){
    return {
      name,
      proj:"NaN",
      edge:"NaN",
      pred:"NO PLAY",
      prob:"0.0"
    };
  }

  let edge = proj - market;
  let std = proj * 0.08;

  if(std === 0 || isNaN(std)){
    return {
      name,
      proj:proj.toFixed(2),
      edge:"NaN",
      pred:"NO PLAY",
      prob:"0.0"
    };
  }

  let z = edge / std;
  let prob = 0.5 * (1 + Math.tanh(z * 0.8));
  let minEdge = market * 0.03;

  let prediction = "NO PLAY";

  if(Math.abs(edge) >= minEdge){
    if(edge > 0) prediction = "OVER " + market.toFixed(1);
    else prediction = "UNDER " + market.toFixed(1);
  }

  return {
    name,
    proj:proj.toFixed(2),
    edge:edge.toFixed(2),
    pred:prediction,
    prob:(prob*100).toFixed(1)
  };
}

function runEngine(){

  const table = document.getElementById("results");

  table.innerHTML = `
  <tr>
    <th>Pick</th>
    <th>Projection</th>
    <th>Edge</th>
    <th>Prediction</th>
    <th>Probability %</th>
  </tr>`;

  // Market Lines
  let ftMarket = mid(document.getElementById("ftMarket").value);
  let h1Market = mid(document.getElementById("h1Market").value);
  let aMarket = mid(document.getElementById("teamAMarket").value);
  let bMarket = mid(document.getElementById("teamBMarket").value);

  // Stats
  let aAvg = parseNum("teamAAvg");
  let bAvg = parseNum("teamBAvg");
  let papgA = parseNum("papgA");
  let papgB = parseNum("papgB");
  let paceA = parseNum("paceA");
  let paceB = parseNum("paceB");

  // Base projections
  let aProj = (isNaN(aAvg)||isNaN(papgB)) ? NaN : (aAvg + papgB) / 2;
  let bProj = (isNaN(bAvg)||isNaN(papgA)) ? NaN : (bAvg + papgA) / 2;

  // Home boost
  if(!isNaN(aProj) && !isNaN(bProj)){
    if(document.getElementById("homeTeam").value === "A") aProj += 2;
    else bProj += 2;
  }

  // Pace adjustment
  let ftProj = NaN;

  if(!isNaN(aProj) && !isNaN(bProj)){
    let avgPace = (!isNaN(paceA)&&!isNaN(paceB)) ? (paceA+paceB)/2 : 100;
    ftProj = (aProj + bProj) * (avgPace/100);
  }

  // H2H FT
  let useH2HFT = document.getElementById("useH2HFT").checked;
  if(useH2HFT && !isNaN(ftProj)){
    let h2hA = parseNum("h2hA");
    let h2hB = parseNum("h2hB");
    if(!isNaN(h2hA) && !isNaN(h2hB)){
      ftProj = (ftProj + (h2hA + h2hB)) / 2;
    }
  }

  // 1H projection
  let h1Proj = isNaN(ftProj) ? NaN : ftProj * 0.5;

  // H2H 1H
  let useH2H1H = document.getElementById("useH2H1H").checked;
  if(useH2H1H && !isNaN(h1Proj)){
    let h2h1H = parseNum("h2h1H");
    if(!isNaN(h2h1H)){
      h1Proj = (h1Proj + h2h1H) / 2;
    }
  }

  // Build 4 picks ALWAYS
  let picks = [
    makePick("FT Total", ftProj, ftMarket),
    makePick("1H Total", h1Proj, h1Market),
    makePick("Team A Total", aProj, aMarket),
    makePick("Team B Total", bProj, bMarket)
  ];

  picks.forEach(p=>{
    let row = table.insertRow();
    row.innerHTML = `
      <td>${p.name}</td>
      <td>${p.proj}</td>
      <td>${p.edge}</td>
      <td class="${
        p.pred.includes("OVER") ? "pred-over" :
        p.pred.includes("UNDER") ? "pred-under" :
        "pred-noplay"
      }">${p.pred}</td>
      <td>${p.prob}</td>
    `;
  });
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>{
    if(i.type==="checkbox") i.checked=false;
    else i.value="";
  });
}

</script>

</body>
</html>
