<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Prediction Engine</title>

<style>
body {
  margin: 0;
  font-family: Segoe UI, sans-serif;
  background: radial-gradient(circle at top, #1c1c1c, #111);
  color: #d4af37;
}

.wrapper {
  max-width: 680px;
  margin: auto;
  padding: 10px;
}

h1 {
  text-align: center;
  font-size: 18px;
  margin-bottom: 12px;
}

.section {
  border: 1px solid #d4af37;
  background: #1a1a1a;
  padding: 8px 10px;
  margin-bottom: 10px;
}

.section h2 {
  font-size: 14px;
  margin-bottom: 6px;
}

label {
  display: block;
  font-size: 12px;
  margin-bottom: 3px;
}

.check {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 4px 0;
}

input {
  width: 100%;
  max-width: 240px;
  padding: 4px 6px;
  font-size: 12px;
  background: #222;
  color: #d4af37;
  border: 1px solid #d4af37;
  margin-bottom: 6px;
}

input[type="checkbox"] {
  width: auto;
}

.flex {
  display: flex;
  gap: 10px;
}

.half {
  flex: 1;
}

.buttons {
  text-align: center;
  margin: 10px 0;
}

.btn {
  padding: 5px 14px;
  margin: 5px;
  font-size: 12px;
  font-weight: bold;
  background: #d4af37;
  color: #111;
  border: none;
  cursor: pointer;
}

.table-wrap {
  overflow-x: auto;
}

#results {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
  display: none;
}

#results th, #results td {
  border: 1px solid #d4af37;
  padding: 5px;
  text-align: center;
}

.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }

.lock {
  font-size: 8px;
  margin-left: 4px;
}
</style>
</head>

<body>
<div class="wrapper">

<h1>üèÄ Basketball Prediction Engine</h1>

<div class="section">
<h2>Market Lines</h2>
<label>FT Total Market (150.5 - 160.5)</label>
<input id="ftMarket">
<label>1H Total Market (75.5 - 85.5)</label>
<input id="h1Market">
<label>Team A Total Market</label>
<input id="teamAMarket">
<label>Team B Total Market</label>
<input id="teamBMarket">
</div>

<div class="section">
<h2>Team Scoring Averages</h2>
<label>Team A FT Average</label>
<input id="teamAAvg">
<label>Team B FT Average</label>
<input id="teamBAvg">
</div>

<div class="section">
<h2>Head to Head (Optional)</h2>
<label class="check"><input type="checkbox" id="useH2HFT"> Use H2H (FT)</label>
<input id="h2hA" placeholder="Team A H2H FT Avg">
<input id="h2hB" placeholder="Team B H2H FT Avg">

<label class="check"><input type="checkbox" id="useH2H1H"> Use H2H (1H)</label>
<input id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<div class="section flex">
<div class="half">
<h2>Team A Metrics</h2>
<label>Team A Pace</label>
<input id="paceA">
<label>Team A Points Allowed</label>
<input id="papgA">
</div>

<div class="half">
<h2>Team B Metrics</h2>
<label>Team B Pace</label>
<input id="paceB">
<label>Team B Points Allowed</label>
<input id="papgB">
</div>
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">RUN</button>
<button class="btn" onclick="clearAll()">CLEAR</button>
</div>

<div class="table-wrap">
<table id="results">
<tr>
<th>Pick</th>
<th>Engine Mid</th>
<th>Edge</th>
<th>Prediction</th>
<th>Confidence %</th>
</tr>
</table>
</div>

</div>

<script>
function num(id){let v=parseFloat(document.getElementById(id).value);return isNaN(v)?NaN:v;}
function mid(r){if(!r||!r.includes("-"))return NaN;let[a,b]=r.split("-").map(x=>parseFloat(x.trim()));return(isNaN(a)||isNaN(b))?NaN:(a+b)/2;}
function clamp(v,min,max){return Math.max(min,Math.min(max,v));}
function confidence(e){if(isNaN(e))return 0;return Math.min(95,Math.round(70+(Math.abs(e)-3)*5));}

function runEngine(){
const table=document.getElementById("results");
table.style.display="table";
table.innerHTML=`<tr><th>Pick</th><th>Engine Mid</th><th>Edge</th><th>Prediction</th><th>Confidence %</th></tr>`;

let ftMarketStr=ftMarket.value,h1MarketStr=h1Market.value,aMarketStr=teamAMarket.value,bMarketStr=teamBMarket.value;
let ftMarket=mid(ftMarketStr),h1Market=mid(h1MarketStr),aMarket=mid(aMarketStr),bMarket=mid(bMarketStr);

function getRange(str){if(!str.includes("-"))return[NaN,NaN];let[l,h]=str.split("-").map(x=>parseFloat(x.trim()));return[l,h];}
let[ftLow,ftHigh]=getRange(ftMarketStr),[h1Low,h1High]=getRange(h1MarketStr),[aLow,aHigh]=getRange(aMarketStr),[bLow,bHigh]=getRange(bMarketStr);

let aAvg=num("teamAAvg"),bAvg=num("teamBAvg"),h2hA=num("h2hA"),h2hB=num("h2hB"),h2h1H=num("h2h1H"),papgA=num("papgA"),papgB=num("papgB");
let useH2HFT=useH2HFT.checked,useH2H1H=useH2H1H.checked;

let aOff=useH2HFT?(0.7*aAvg+0.3*h2hA):aAvg;
let bOff=useH2HFT?(0.7*bAvg+0.3*h2hB):bAvg;

let aEngine=(aOff+papgB)/2;
let bEngine=(bOff+papgA)/2;

let offenseBase=aAvg+bAvg;
let h2hBase=h2hA+h2hB;
let ftOff=useH2HFT?(0.7*offenseBase+0.3*h2hBase):offenseBase;
let ftEngine=(ftOff+papgA+papgB)/2;

let h1Engine=ftEngine*0.48;
if(useH2H1H)h1Engine=(0.7*h1Engine+0.3*h2h1H);

function makePick(name,engine,market,low,high){
let edge=engine-market,conf=confidence(edge),pred="NO PLAY";
if(!isNaN(edge)){
if(edge>0){let line=clamp(market-3,low,high);pred="OVER "+line.toFixed(1);}
else if(edge<0){let line=clamp(market+3,low,high);pred="UNDER "+line.toFixed(1);}
}
if(conf<70)pred="NO PLAY";
return{name,engine:isNaN(engine)?"NaN":engine.toFixed(2),edge:isNaN(edge)?"NaN":edge.toFixed(2),pred,conf,rawEdge:edge};
}

let picks=[
makePick("FT Total",ftEngine,ftMarket,ftLow,ftHigh),
makePick("1H Total",h1Engine,h1Market,h1Low,h1High),
makePick("Team A Total",aEngine,aMarket,aLow,aHigh),
makePick("Team B Total",bEngine,bMarket,bLow,bHigh)
];

let lockIndex=-1,maxEdge=0;
picks.forEach((p,i)=>{if(!isNaN(p.rawEdge)&&Math.abs(p.rawEdge)>maxEdge&&p.conf>=70){maxEdge=Math.abs(p.rawEdge);lockIndex=i;}});

picks.forEach((p,i)=>{
let row=table.insertRow();
let predText=p.pred;
if(i===lockIndex&&p.pred!=="NO PLAY"){predText+=` <span class="lock">üîí</span>`;}
row.innerHTML=`<td>${p.name}</td><td>${p.engine}</td><td>${p.edge}</td>
<td class="${p.pred.startsWith("OVER")?"pred-over":p.pred.startsWith("UNDER")?"pred-under":"pred-noplay"}">${predText}</td>
<td>${p.conf}%</td>`;
});
}

function clearAll(){
document.querySelectorAll("input").forEach(i=>{if(i.type==="checkbox")i.checked=false;else i.value="";});
results.style.display="none";
}
</script>

</body>
</html>
