<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Prediction Engine</title>

<style>
body { background:#1b1b1b; color:#d4af37; font-family:Segoe UI,sans-serif; margin:0; }
.wrapper { max-width:700px; margin:auto; padding:12px 14px 40px; }
h1 { text-align:center; font-size:18px; margin-bottom:12px; }
.section { border:1px solid #d4af37; background:#202020; padding:8px 10px; margin-bottom:10px; }
.section h2 { font-size:14px; margin-bottom:6px; }
label { display:block; font-size:12px; margin:5px 0 2px; }
input, select {
  width:240px; max-width:90%;
  padding:5px 6px;
  font-size:12px;
  background:#262626;
  color:#d4af37;
  border:1px solid #d4af37;
  margin:4px 0 8px 0;
  border-radius:0;
  appearance:none;
}
input[type="checkbox"] { width:auto; margin-right:6px; }
.buttons { text-align:center; margin-top:10px; }
.btn { padding:6px 18px; margin:6px; font-size:12px; font-weight:bold; background:#d4af37; color:#111; border:none; cursor:pointer; }
#results { width:100%; border-collapse:collapse; font-size:12px; display:none; margin-top:10px; }
#results th,#results td { border:1px solid #d4af37; padding:6px; text-align:center; }
.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }
.lock { font-size:10px; margin-left:4px; }
</style>
</head>

<body>
<div class="wrapper">
<h1>üèÄ Basketball Prediction Engine</h1>

<div class="section">
<h2>League</h2>
<select id="league">
<option value="NBA">NBA</option>
<option value="EURO">EuroLeague</option>
<option value="NCAA">NCAA</option>
<option value="OTHER">Other</option>
</select>
</div>

<div class="section">
<h2>Game Context</h2>
<label>Home Team</label>
<select id="homeTeam">
<option value="A">Team A</option>
<option value="B">Team B</option>
</select>
</div>

<div class="section">
<h2>Market Lines</h2>
<label>FT Total Market (150.5 - 160.5)</label>
<input id="ftMarket">
<label>1H Total Market (75.5 - 85.5)</label>
<input id="h1Market">
<label>Team A Total Market</label>
<input id="teamAMarket">
<label>Team B Total Market</label>
<input id="teamBMarket">
</div>

<div class="section">
<h2>Team Metrics</h2>
<label>Team A Avg Points</label>
<input id="teamAAvg">
<label>Team A Points Allowed</label>
<input id="papgA">
<label>Team A Pace</label>
<input id="paceA">

<label>Team B Avg Points</label>
<input id="teamBAvg">
<label>Team B Points Allowed</label>
<input id="papgB">
<label>Team B Pace</label>
<input id="paceB">
</div>

<div class="buttons">
<button class="btn" onclick="runEngine()">Run</button>
<button class="btn" onclick="clearAll()">Clear</button>
</div>

<table id="results">
<tr>
<th>Pick</th>
<th>Projection</th>
<th>Edge</th>
<th>Prediction</th>
<th>Probability</th>
</tr>
</table>
</div>

<script>

function num(id){
  let v=parseFloat(document.getElementById(id).value);
  return isNaN(v)?NaN:v;
}

function mid(r){
  if(!r||!r.includes("-"))return NaN;
  let[a,b]=r.split("-").map(x=>parseFloat(x));
  return(isNaN(a)||isNaN(b))?NaN:(a+b)/2;
}

function clamp(v,min,max){
  return Math.max(min,Math.min(max,v));
}

function leagueParams(league){
  switch(league){
    case "NBA": return {homeBoost:2.5, variance:0.075, firstHalfRatio:0.5};
    case "EURO": return {homeBoost:2, variance:0.07, firstHalfRatio:0.5};
    case "NCAA": return {homeBoost:3, variance:0.085, firstHalfRatio:0.5};
    default: return {homeBoost:2, variance:0.08, firstHalfRatio:0.5};
  }
}

function runEngine(){

  const table=document.getElementById("results");
  table.style.display="table";
  table.innerHTML=`<tr>
  <th>Pick</th><th>Projection</th><th>Edge</th>
  <th>Prediction</th><th>Probability</th></tr>`;

  let league=document.getElementById("league").value;
  let params=leagueParams(league);

  let ft=mid(ftMarket.value);
  let h1=mid(h1Market.value);
  let aM=mid(teamAMarket.value);
  let bM=mid(teamBMarket.value);

  let aAvg=num("teamAAvg");
  let bAvg=num("teamBAvg");
  let papgA=num("papgA");
  let papgB=num("papgB");
  let paceA=num("paceA");
  let paceB=num("paceB");

  if(isNaN(aAvg)||isNaN(bAvg)||isNaN(papgA)||isNaN(papgB)) return;

  // Base projections
  let aEng=(aAvg+papgB)/2;
  let bEng=(bAvg+papgA)/2;

  // Home boost
  let home=document.getElementById("homeTeam").value;
  if(home==="A") aEng+=params.homeBoost;
  else bEng+=params.homeBoost;

  // Pace adjustment
  let avgPace=(!isNaN(paceA)&&!isNaN(paceB))?(paceA+paceB)/2:100;
  let paceFactor=avgPace/100;

  let ftEng=(aEng+bEng)*paceFactor;
  let h1Eng=ftEng*params.firstHalfRatio;

  function make(name,eng,mkt){
    if(isNaN(mkt)) return null;

    let edge=eng-mkt;
    let stdDev=eng*params.variance;
    let z=edge/stdDev;
    let prob=0.5*(1+Math.tanh(z*0.8));

    let minEdge=mkt*0.03;
    if(Math.abs(edge)<minEdge) return {
      name,eng:eng.toFixed(2),
      edge:edge.toFixed(2),
      pred:"NO PLAY",
      prob:(prob*100).toFixed(1)
    };

    let pred=edge>0?"OVER":"UNDER";

    return {
      name,
      eng:eng.toFixed(2),
      edge:edge.toFixed(2),
      pred,
      prob:(prob*100).toFixed(1)
    };
  }

  let picks=[
    make("FT Total",ftEng,ft),
    make("1H Total",h1Eng,h1),
    make("Team A Total",aEng,aM),
    make("Team B Total",bEng,bM)
  ];

  picks.forEach(p=>{
    if(!p) return;
    let row=table.insertRow();
    row.innerHTML=`
    <td>${p.name}</td>
    <td>${p.eng}</td>
    <td>${p.edge}</td>
    <td class="${p.pred==="OVER"?"pred-over":p.pred==="UNDER"?"pred-under":"pred-noplay"}">${p.pred}</td>
    <td>${p.prob}%</td>`;
  });
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>i.value="");
  results.style.display="none";
}

</script>
</body>
</html>
