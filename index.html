<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Prediction Engine</title>

<style>
body {
  background: #1b1b1b; /* softer than pure black */
  color: #d4af37;
  font-family: Segoe UI, sans-serif;
  margin: 0;
}

.wrapper {
  max-width: 480px;   /* keeps it phone-sized when added to Home Screen */
  margin: auto;
  padding: 12px;
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 14px;
}

.section {
  border: 1px solid #d4af37;
  background: #222;
  padding: 10px;
  margin-bottom: 12px;
}

.section h2 {
  font-size: 15px;
  margin-bottom: 6px;
}

label {
  display: block;
  font-size: 12px;
  margin: 6px 0 2px;
}

input {
  width: 100%;
  padding: 6px;
  font-size: 13px;
  background: #2a2a2a;
  color: #d4af37;
  border: 1px solid #d4af37;
  margin-bottom: 6px;
  box-sizing: border-box;
}

input[type="checkbox"] {
  width: auto;
  margin-right: 6px;
}

.buttons {
  text-align: center;
  margin-top: 10px;
}

.btn {
  padding: 7px 16px;
  margin: 6px;
  font-size: 13px;
  font-weight: bold;
  background: #d4af37;
  color: #111;
  border: none;
  cursor: pointer;
}

.table-wrap {
  overflow-x: auto;
  margin-top: 14px;
}

#results {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
  display: none;
}

#results th, #results td {
  border: 1px solid #d4af37;
  padding: 6px;
  text-align: center;
}

.pred-over { background:#1e7d3a; color:#fff; font-weight:bold; }
.pred-under { background:#8b1e1e; color:#fff; font-weight:bold; }
.pred-noplay { background:#444; color:#bbb; font-weight:bold; }

.lock {
  font-size: 9px;
  margin-left: 4px;
}
</style>
</head>

<body>
<div class="wrapper">

<h1>üèÄ Basketball Prediction Engine</h1>

<div class="section">
  <h2>Market Lines</h2>
  <label>FT Total Market</label><input id="ftMarket">
  <label>1H Total Market</label><input id="h1Market">
  <label>Team A Total Market</label><input id="teamAMarket">
  <label>Team B Total Market</label><input id="teamBMarket">
</div>

<div class="section">
  <h2>Team Scoring Averages</h2>
  <label>Team A FT Average</label><input id="teamAAvg">
  <label>Team B FT Average</label><input id="teamBAvg">
</div>

<div class="section">
  <h2>Head to Head (Optional)</h2>
  <label><input type="checkbox" id="useH2HFT"> Use H2H (FT)</label>
  <input id="h2hA" placeholder="Team A H2H FT Avg">
  <input id="h2hB" placeholder="Team B H2H FT Avg">

  <label><input type="checkbox" id="useH2H1H"> Use H2H (1H)</label>
  <input id="h2h1H" placeholder="1H H2H Avg Total">
</div>

<div class="section">
  <h2>Team A Metrics</h2>
  <label>Team A Pace</label><input id="paceA">
  <label>Team A Points Allowed</label><input id="papgA">
</div>

<div class="section">
  <h2>Team B Metrics</h2>
  <label>Team B Pace</label><input id="paceB">
  <label>Team B Points Allowed</label><input id="papgB">
</div>

<div class="buttons">
  <button class="btn" onclick="runEngine()">Run</button>
  <button class="btn" onclick="clearAll()">Clear</button>
</div>

<div class="table-wrap">
<table id="results">
<tr>
  <th>Pick</th>
  <th>Engine Mid</th>
  <th>Edge</th>
  <th>Prediction</th>
  <th>Confidence %</th>
</tr>
</table>
</div>

</div>

<script>
function num(id){let v=parseFloat(document.getElementById(id).value);return isNaN(v)?NaN:v;}
function mid(r){if(!r||!r.includes("-"))return NaN;let[a,b]=r.split("-").map(x=>parseFloat(x));return(a+b)/2;}
function clamp(v,min,max){return Math.max(min,Math.min(max,v));}
function confidence(e){if(isNaN(e))return 0;return Math.min(95,Math.round(70+(Math.abs(e)-3)*5));}

function runEngine(){
const t=document.getElementById("results");t.style.display="table";
t.innerHTML=`<tr><th>Pick</th><th>Engine Mid</th><th>Edge</th><th>Prediction</th><th>Confidence %</th></tr>`;

let ftM=mid(ftMarket.value),h1M=mid(h1Market.value),aM=mid(teamAMarket.value),bM=mid(teamBMarket.value);
let [ftL,ftH]=ftMarket.value.split("-").map(Number);
let [h1L,h1H]=h1Market.value.split("-").map(Number);
let [aL,aH]=teamAMarket.value.split("-").map(Number);
let [bL,bH]=teamBMarket.value.split("-").map(Number);

let aAvg=num("teamAAvg"),bAvg=num("teamBAvg"),papgA=num("papgA"),papgB=num("papgB");
let h2hA=num("h2hA"),h2hB=num("h2hB"),h2h1H=num("h2h1H");

let aOff=useH2HFT.checked?(0.7*aAvg+0.3*h2hA):aAvg;
let bOff=useH2HFT.checked?(0.7*bAvg+0.3*h2hB):bAvg;

let aEng=(aOff+papgB)/2;
let bEng=(bOff+papgA)/2;

let ftOff=aAvg+bAvg;
if(useH2HFT.checked)ftOff=(0.7*ftOff+0.3*(h2hA+h2hB));
let ftEng=(ftOff+papgA+papgB)/2;

let h1Eng=ftEng*0.48;
if(useH2H1H.checked)h1Eng=(0.7*h1Eng+0.3*h2h1H);

function pick(n,e,m,l,h){
let edge=e-m,conf=confidence(edge),pred="NO PLAY";
if(conf>=70&&!isNaN(edge)){
if(edge>0)pred="OVER "+clamp(m-3,l,h).toFixed(1);
else pred="UNDER "+clamp(m+3,l,h).toFixed(1);
}
return{name:n,eng:e.toFixed(2),edge:edge.toFixed(2),pred,conf,raw:edge};
}

let picks=[
pick("FT Total",ftEng,ftM,ftL,ftH),
pick("1H Total",h1Eng,h1M,h1L,h1H),
pick("Team A Total",aEng,aM,aL,aH),
pick("Team B Total",bEng,bM,bL,bH)
];

let lock=-1,max=0;
picks.forEach((p,i)=>{if(Math.abs(p.raw)>max&&p.conf>=70){max=Math.abs(p.raw);lock=i;}});

picks.forEach((p,i)=>{
let r=t.insertRow();
let pred=p.pred+(i===lock&&p.pred!=="NO PLAY"?" <span class='lock'>üîí</span>":"");
r.innerHTML=`<td>${p.name}</td><td>${p.eng}</td><td>${p.edge}</td>
<td class="${p.pred.startsWith("OVER")?"pred-over":p.pred.startsWith("UNDER")?"pred-under":"pred-noplay"}">${pred}</td>
<td>${p.conf}%</td>`;
});
}

function clearAll(){
document.querySelectorAll("input").forEach(i=>i.type==="checkbox"?i.checked=false:i.value="");
results.style.display="none";
}
</script>
</body>
</html>
